<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGv8 Single-Cycle Datapath</title>
    <link rel="stylesheet" href="css/sub_general.css">
</head>
<body>
    <!-- **** START: Thêm khu vực điều khiển và SVG vào container chính **** -->
    <div id="simulation-container">
        <!-- Khu vực điều khiển (Editor, Button, Output) -->
        <div id="controls">
            <label for="instruction-editor">Instructions:</label>
            <div class="editor-wrapper">
                <div class="line-numbers" id = "lineNumbers">
                    <!--  -->
                </div>
                <textarea id="instruction-editor" placeholder="Your Code Here"></textarea>
            </div>

            <button id="simulate-button">Simulate Step</button>

            <label for="json-output">Simulation State (JSON):</label>
            <pre id="json-output">{ "message": "Ready to simulate..." }</pre>
        </div>
        <!-- Khu vực chứa SVG Datapath -->
        <div id="svg-container">

            <!-- **** START: Add Buttons Container **** -->
            <div id="svg-overlay-buttons">
                <button id="reset-zoom-button" title="Reset Zoom & Pan (R)">🔄</button>
                <button id="theme-toggle-button" title="Toggle Theme (T)">🌓</button>
                 <!-- Add title attribute for tooltips -->
            </div>
            <!-- **** END: Add Buttons Container **** -->

            <svg viewBox="0 0 1000 650">
                <defs>
                    <!-- Arrowhead marker definition -->
                    <marker id="arrow-black" viewBox="0 0 10 10" refX="8" refY="5"
                        markerWidth="6" markerHeight="6"
                        orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="black" />
                    </marker>
                    <marker id="arrow-blue" viewBox="0 0 10 10" refX="8" refY="5"
                        markerWidth="6" markerHeight="6"
                        orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="#007bff" />
                    </marker>
                    <marker id="arrow-active" viewBox="0 0 10 10" refX="8" refY="5"
                        markerWidth="6" markerHeight="6"
                        orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="#ff9900" />
                    </marker>
                </defs>

                <!-- Components (Giữ nguyên như file bạn cung cấp) -->
                <!-- PC -->
                <rect x="40" y="350" width="30" height="60" class="component" id="pc"/>
                <text x="55" y="380" class="label">PC</text>
                <!-- Add 4 -->
                <polygon points="170,70 230,90 230,130 170,150 170,120 180,110 170,100 170,70" class="alu" id="add-pc-4"/>
                <text x="200" y="110" class="label">Add</text>
                <text x="130" y="130" class="label">4</text>
                <!-- Instruction Memory -->
                <rect x="115" y="370" width="90" height="120" class="component" id="instruction-memory"/>
                <text x="160" y="470" class="label">Instruction</text>
                <text x="160" y="480" class="label">memory</text>
                <text x="120" y="380" class="label-left">Read</text>
                <text x="120" y="390" class="label-left">address</text>
                <text x="200" y="425" class="label-right">Instruction</text>
                <text x="200" y="435" class="label-right">[31-0]</text>
                <!-- Mux Reg Write Dest -->
                <ellipse cx="340" cy="423" rx="15" ry="40" class="mux" id="mux1"/>
                <text x="340" y="413" class="label">M</text>
                <text x="340" y="423" class="label">u</text>
                <text x="340" y="433" class="label">x</text>
                <text x="340" y="403" class="label-small">0</text>
                <text x="340" y="443" class="label-small">1</text>
                <!-- Registers -->
                <rect x="390" y="365" width="100" height="130" class="component" id="registers"/>
                <text x="485" y="485" class="label-right">Registers</text>
                <text x="395" y="375" class="label-left">Read</text>
                <text x="395" y="385" class="label-left">register 1</text>
                <text x="395" y="415" class="label-left">Read</text>
                <text x="395" y="425" class="label-left">register 2</text>
                <text x="395" y="455" class="label-left">Write</text>
                <text x="395" y="465" class="label-left">register</text>
                <text x="395" y="480" class="label-left">Write</text>
                <text x="395" y="490" class="label-left">data</text>
                <text x="485" y="395" class="label-right">Read</text>
                <text x="485" y="405" class="label-right">data 1</text>
                <text x="485" y="435" class="label-right">Read</text>
                <text x="485" y="445" class="label-right">data 2</text>
                <!-- Sign Extend -->
                <ellipse cx="440" cy="560" rx="20" ry="30" class="component" id="sign-extend"/>
                <text x="440" y="555" class="label">Sign</text>
                <text x="440" y="565" class="label">extend</text>
                <text x="400" y="560" class="label-small">32</text>
                <text x="480" y="560" class="label-small">64</text>
                <!-- Mux ALU Src -->
                <ellipse cx="560" cy="460" rx="15" ry="40" class="mux" id="mux2"/>
                <text x="560" y="450" class="label">M</text>
                <text x="560" y="460" class="label">u</text>
                <text x="560" y="470" class="label">x</text>
                <text x="560" y="440" class="label-small">0</text>
                <text x="560" y="480" class="label-small">1</text>
                <!-- ALU Control -->
                <ellipse cx="580" cy="575" rx="25" ry="35" class="control-unit" id="alu-control"/>
                <text x="580" y="570" class="label">ALU</text>
                <text x="580" y="580" class="label">control</text>
                <!-- ALU -->
                <polygon points="610,380 670,400 670,460 610,480 610,445 625,430 610,415 610,380" class="alu" id="alu"/>
                <text x="650" y="430" class="label">ALU</text>
                <text x="645" y="405" class="control-label">Zero</text> <!-- This is the Zero flag output -->
                
                <!--Flags-->
                <rect x="600" y="350" width="80" height="20" class="component" fill="white" id="flags"/>
                <text x="610" y="360" class="label">N</text>
                <text x="630" y="360" class="label">Z</text>
                <text x="650" y="360" class="label">C</text>
                <text x="670" y="360" class="label">V</text>
                <!-- Data Memory -->
                <rect x="760" y="420" width="100" height="120" class="component" id="data-memory"/>
                <text x="840" y="490" class="label">Data</text>
                <text x="840" y="500" class="label">memory</text>
                <text x="765" y="440" class="label-left">Address</text>
                <text x="765" y="520" class="label-left">Write</text>
                <text x="765" y="530" class="label-left">Data</text>
                <text x="850" y="455" class="label-right">Read</text>
                <text x="850" y="465" class="label-right">data</text>
                <!-- Mux Writeback -->
                <ellipse cx="910" cy="480" rx="15" ry="40" class="mux" id="mux3"/>
                <text x="910" y="470" class="label">M</text>
                <text x="910" y="480" class="label">u</text>
                <text x="910" y="490" class="label">x</text>
                <text x="910" y="460" class="label-small">1</text>
                <text x="910" y="500" class="label-small">0</text>
                <!-- Shift Left 2 -->
                <circle cx="620" cy="180" r="25" class="component" fill="white" id="shift-left-2"/>
                <text x="620" y="175" class="label">Shift</text>
                <text x="620" y="188" class="label">left 2</text>
                <!-- Add Branch Target -->
                <polygon points="670,120 720,140 720,180 670,200 670,170, 680,160 670,150 670,120" class="alu" id="add-branch"/>
                <text x="700" y="160" class="label">Add</text>
                <!-- Mux PC Source -->
                <ellipse cx="870" cy="140" rx="15" ry="40" class="mux" id="mux4"/>
                <text x="870" y="130" class="label">M</text>
                <text x="870" y="140" class="label">u</text>
                <text x="870" y="150" class="label">x</text>
                <text x="870" y="120" class="label-small">0</text>
                <text x="870" y="160" class="label-small">1</text>
                <!-- Control Unit -->
                <ellipse cx="370" cy="280" rx="30" ry="70" class="control-unit" id="control-unit"/>
                <text x="370" y="280" class="label" fill="#007bff">Control</text>
                <!-- Control Labels (LEGv8 specific) -->
                <text x="405" y="225" class="control-label">Reg2Loc</text>
                <text x="405" y="237" class="control-label">Uncondbranch</text>
                <text x="405" y="249" class="control-label">FlagBranch</text>
                <text x="405" y="261" class="control-label">ZeroBranch</text>
                <text x="405" y="273" class="control-label">MemRead</text>
                <text x="405" y="285" class="control-label">MemtoReg</text>
                <text x="405" y="297" class="control-label">MemWrite</text>
                <text x="405" y="309" class="control-label">FlagWrite</text>
                <text x="405" y="321" class="control-label">ALUSrc</text>
                <text x="405" y="333" class="control-label">ALUOp</text>
                <text x="405" y="345" class="control-label">RegWrite</text>

                <!--Blue Text-->
                <text x="333" y="495" class="control-label" id="near-mux-1">0</text>
                <text x="443" y="360" class="control-label" id="near-reg-write">0</text>
                <text x="553" y="416" class="control-label" id="near-mux-2">0</text>
                <text x="633" y="345" class="control-label" id="near-flag">0</text>
                <text x="695" y="340" class="control-label" id="near-and-1">0</text>
                <text x="755" y="340" class="control-label" id="near-and-2">0</text>
                <text x="807" y="237" class="control-label" id="near-orr">0</text>
                <text x="862" y="187" class="control-label" id="near-mux-4">0</text>
                <text x="795" y="413" class="control-label" id="near-high-memory">0</text>
                <text x="900" y="435" class="control-label" id="near-mux-3">0</text>
                <text x="803" y="547" class="control-label" id="near-low-memory">0</text>
                <text x="642" y="477" class="control-label" id="near-alu">0000</text>
                <text x="567" y="615" class="control-label" id="near-alu-control">00</text>

                <!-- Wires-->
                <!--MUX to PC-->
                <polyline class="wire-black" id="1.1" points="885,140 930,140"/>
                <polyline class="wire-black" id="1.2" points="930,140 930,50"/>
                <polyline class="wire-black" id="1.3" points="930,50 20,50"/>
                <polyline class="wire-black" id="1.4" points="20,50 20,380"/>
                <polyline class="wire-black" id="1.5" points="20,380 40,380" marker-end="url(#arrow-black)"/>
                
                <!--Add4 to MUX-->
                <polyline class="wire-black" id="2.1" points="230,110 860,110" marker-end="url(#arrow-black)"/>
                
                <!--PC to InsMemory-->
                <polyline class="wire-black" id="3.1" points="70,380 92,380"/>
                <polyline class="wire-black" id="4.1" points="92,380 115,380" marker-end="url(#arrow-black)"/>
                
                <!--PC to Add4-->
                <polyline class="wire-black" id="5.1" points="92,380 92,200"/>
                <polyline class="wire-black" id="6.1" points="92,200 92,90"/>
                <polyline class="wire-black" id="6.2" points="92,90 170,90" marker-end="url(#arrow-black)"/>
                
                <!--4 to Add-->
                <polyline class="wire-black" id="7.1" points="135,130 170,130" marker-end="url(#arrow-black)"/>
                
                <!--Add to MUX4-->
                <polyline class="wire-black" id="39.1" points="720,160 855,160" marker-end="url(#arrow-black)"/>
                
                <!--Shift Left 2 to Add-->
                <polyline class="wire-black" id="38.1" points="645,185 670,185" marker-end="url(#arrow-black)"/>
                
                <!--PC to Add-->
                <polyline class="wire-black" id="8.1" points="92,200 290,200"/>
                <polyline class="wire-black" id="8.2" points="290,200 290,140"/>
                <polyline class="wire-black" id="8.3" points="290,140 670,140" marker-end="url(#arrow-black)"/>
                
                <!--Sign Extend to Shift Left 2-->
                <polyline class="wire-black" id="24.1" points="460,565 520,565"/>
                <polyline class="wire-black" id="24.2" points="520,565 520,480"/>
                <polyline class="wire-black" id="25.1" points="520,480 520,180"/>
                <polyline class="wire-black" id="25.2" points="520,180 595,180" marker-end="url(#arrow-black)"/>
                
                <!--InsMemory to Sign Extend-->
                <polyline class="wire-black" id="9.1" points="205,430 230,430"/>
                <polyline class="wire-black" id="16.1" points="230,430 230,480"/>
                <polyline class="wire-black" id="20.1" points="230,480 230,565"/>
                <polyline class="wire-black" id="20.2" points="230,565 370,565"/>
                <polyline class="wire-black" id="22.1" points="370,565 420,565" marker-end="url(#arrow-black)"/>
                <!--InsMemory to Control-->
                <polyline class="wire-black" id="10.1" points="230,430 230,415"/>
                <polyline class="wire-black" id="12.1" points="230,415 230,380"/>
                <polyline class="wire-black" id="14.1" points="230,380 230,280"/>
                <polyline class="wire-black" id="14.2" points="230,280 340,280" marker-end="url(#arrow-black)"/>
                <text x="275" y="275" class="label-small">Instruction[31-21]</text>
                
                <polyline class="wire-black" id="13.1" points="230,380 390,380" marker-end="url(#arrow-black)"/>
                <text x="270" y="375" class="label-small">Instruction[9-5]</text>
                
                <polyline class="wire-black" id="11.1" points="230,415 325,415" marker-end="url(#arrow-black)"/>
                <text x="275" y="410" class="label-small">Instruction[20-16]</text>
                
                <polyline class="wire-black" id="17.1" points="230,470 290,470"/>
                <polyline class="wire-black" id="19.1" points="290,470 390,470" marker-end="url(#arrow-black)"/>
                <text x="270" y="480" class="label-small">Instruction[4-0]</text>
                
                <polyline class="wire-black" id="18.1" points="290,470 290,445"/>
                <polyline class="wire-black" id="18.2" points="290,445 325,445" marker-end="url(#arrow-black)"/>
                
                <text x="275" y="560" class="label-small">Instruction[31-0]</text>

                <!--MUX to Registers-->
                <polyline class="wire-black" id="21.1" points="355,430 390,430" marker-end="url(#arrow-black)"/>
                
                <!--InsMemory to ALU Control-->
                <polyline class="wire-black" id="23.1" points="370,565 370,615"/>
                <polyline class="wire-black" id="23.2" points="370,615 535,615"/>
                <polyline class="wire-black" id="23.3" points="535,615 535,580"/>
                <polyline class="wire-black" id="23.4" points="535,580 555,580" marker-end="url(#arrow-black)"/>
                <text x="415" y="610" class="label-small">Instruction[31-21]</text>

                <!--Registers to MUX-->
                <polyline class="wire-black" id="27.1" points="490,440 505,440"/>
                <polyline class="wire-black" id="28.1" points="505,440 545,440" marker-end="url(#arrow-black)"/>
                
                <!--Sign Extends to MUX-->
                <polyline class="wire-black" id="26.1" points="520,480 545,480" marker-end="url(#arrow-black)"/>
                
                <!--Registers to ALU-->
                <polyline class="wire-black" id="30.1" points="490,400 610,400" marker-end="url(#arrow-black)"/>
                
                <!--MUX2 to ALU-->
                <polyline class="wire-black" id="37.1" points="575,460 610,460" marker-end="url(#arrow-black)"/>
                
                <!--Registers to Data Memory-->
                <polyline class="wire-black" id="29.1" points="505,440 505,525"/>
                <polyline class="wire-black" id="29.2" points="505,525 760,525" marker-end="url(#arrow-black)"/>
                
                <!--ALU to Data Memory-->
                <polyline class="wire-black" id="32.1" points="670,440 740,440"/>
                <polyline class="wire-black" id="33.1" points="740,440 760,440" marker-end="url(#arrow-black)"/>
                
                <!--ALU to MUX3-->
                <polyline class="wire-black" id="34.1" points="740,440 740,570"/>
                <polyline class="wire-black" id="34.2" points="740,570 880,570"/>
                <polyline class="wire-black" id="34.3" points="880,570 880,500"/>
                <polyline class="wire-black" id="34.4" points="880,500 895,500" marker-end="url(#arrow-black)"/>
                
                <!--MUX3 to Registers-->
                <polyline class="wire-black" id="36.1" points="925,480 940,480"/>
                <polyline class="wire-black" id="36.2" points="940,480 940,630"/>
                <polyline class="wire-black" id="36.3" points="940,630 350,630"/>
                <polyline class="wire-black" id="36.4" points="350,630 350,485"/>
                <polyline class="wire-black" id="36.5" points="350,485 390,485" marker-end="url(#arrow-black)"/>
                
                <!--Data Memory to MUX3-->
                <polyline class="wire-black" id="35.1" points="860,460 895,460" marker-end="url(#arrow-black)"/>
                
                <!--ALU to Flag-->
                <polyline class="wire-black" id="31.1" points="640,390 640,370" marker-end="url(#arrow-black)"/>

                <!--Logic Path-->
                <!--RegWrite-->
                <polyline class="wire-blue" points="370,350 440,350"/>
                <polyline class="wire-blue" points="440,350 440,365"/>
                <!--ALUOp-->
                <polyline class="wire-blue" points="385,340 513,340"/>
                <polyline class="wire-blue" points="513,340 513,622"/>
                <polyline class="wire-blue" points="513,622 580,622"/>
                <polyline class="wire-blue" points="580,622 580,610"/>
                <!--ALU Control to ALU-->
                <polyline class="wire-blue" points="605,580 640,580"/>
                <polyline class="wire-blue" points="640,580 640,470"/>
                <!--ALUSrc-->
                <polyline class="wire-blue" points="393,327 560,327"/>
                <polyline class="wire-blue" points="560,327 560,420"/>
                <!--FlagWrite-->
                <polyline class="wire-blue" points="395,315 640,315"/>
                <polyline class="wire-blue" points="640,315 640,350"/>
                <!--MemWrite-->
                <polyline class="wire-blue" points="400,303 805,303"/>
                <polyline class="wire-blue" points="805,303 805,420"/>
                <!--MemToReg-->
                <polyline class="wire-blue" points="400,292 910,292"/>
                <polyline class="wire-blue" points="910,292 910,440"/>
                <!--MemRead-->
                <polyline class="wire-blue" points="400,280 970,280"/>
                <polyline class="wire-blue" points="970,280 970,600"/>
                <polyline class="wire-blue" points="970,600 810,600"/>
                <polyline class="wire-blue" points="810,600 810,540"/>

                <g transform="translate(690, 335)"> <path d="M 15 0 L 15 30 A 15 15 0 0 0 15 0 Z" class="gate" id="and-gate1"/> </g>
                <g transform="translate(750, 335)"> <path d="M 15 0 L 15 30 A 15 15 0 0 0 15 0 Z" class="gate" id="and-gate2"/> </g>
                <g transform="translate(810, 235)"> <path d="M 5 0 C 15 0, 30 5, 35 15 C 30 25, 15 30, 5 30 A 5 15 0 0 0 5 0 Z" class="gate" id="or-gate"/> </g>
                
                <!--ZeroBranch-->
                <polyline class="wire-blue" points="400,267 750,267"/>
                <polyline class="wire-blue" points="750,267 750,345"/>
                <polyline class="wire-blue" points="750,345 765,345"/>
                
                <!--ALU to AND 2-->
                <polyline class="wire-blue" points="670,405 750,405"/>
                <polyline class="wire-blue" points="750,405 750,355"/>
                <polyline class="wire-blue" points="750,355 765,355"/>

                <!--AND 2 to ORR-->
                <polyline class="wire-blue" points="780,350 790,350"/>
                <polyline class="wire-blue" points="790,350 790,260"/>
                <polyline class="wire-blue" points="790,260 818,260"/>

                <!--FlagBranch-->
                <polyline class="wire-blue" points="397,255 690,255"/>
                <polyline class="wire-blue" points="690,255 690,345"/>
                <polyline class="wire-blue" points="690,345 705,345"/>

                <polyline class="wire-blue" points="680,360 705,360"/>

                <polyline class="wire-blue" points="720,350 730,350"/>
                <polyline class="wire-blue" points="730,350 730,250"/>
                <polyline class="wire-blue" points="730,250 820,250"/>
                <!--Uncondbranch-->
                <polyline class="wire-blue" points="395,243 820,243"/>
                <!--ORLogic-->
                <polyline class="wire-blue" points="845,250 870,250"/>
                <polyline class="wire-blue" points="870,250 870,180"/>
                <!--Reg2Loc-->
                <polyline class="wire-blue" points="390,230 400,230"/>
                <polyline class="wire-blue" points="400,230 400,180"/>
                <polyline class="wire-blue" points="400,180 220,180"/>
                <polyline class="wire-blue" points="220,180 220,500"/>
                <polyline class="wire-blue" points="220,500 340,500"/>
                <polyline class="wire-blue" points="340,500 340,463"/>

                <circle id="dot-1" class="data-dot" cx="885" cy="140">
                    <animateMotion
                        id="anim-1"
                        dur="4.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 45 0 L 45 -90 L -865 -90 L -865 240 L -845 240"
                    />
                </circle>

                <circle id="dot-2" class="data-dot" cx="230" cy="110">
                    <animateMotion
                        id="anim-2"
                        dur="3.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 630 0"
                        />
                </circle>

                <circle id="dot-3" class="data-dot" cx="70" cy="380">
                    <animateMotion
                        id="anim-3"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 22 0"
                        />
                </circle>

                <circle id="dot-4" class="data-dot" cx="92" cy="380">
                    <animateMotion
                        id="anim-4"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 23 0"
                        />
                </circle>

                <circle id="dot-5" class="data-dot" cx="92" cy="380">
                    <animateMotion
                        id="anim-5"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -180"
                        />
                </circle>

                <circle id="dot-6" class="data-dot" cx="92" cy="200">
                    <animateMotion
                        id="anim-6"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -110 L 78 -110"
                        />
                </circle>

                <circle id="dot-7" class="data-dot" cx="135" cy="130">
                    <animateMotion
                        id="anim-7"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 35 0"
                        />
                </circle>

                <circle id="dot-39" class="data-dot" cx="720" cy="160">
                    <animateMotion
                        id="anim-39"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 135 0"
                        />
                </circle>

                <circle id="dot-38" class="data-dot" cx="645" cy="185">
                    <animateMotion
                        id="anim-38"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 25 0"
                        />
                </circle>

                <circle id="dot-8" class="data-dot" cx="92" cy="200">
                    <animateMotion
                        id="anim-8"
                        dur="3.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 198 0 L 198 -60 L 578 -60"
                        />
                </circle>

                <circle id="dot-24" class="data-dot" cx="460" cy="565">
                    <animateMotion
                        id="anim-24"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 60 0 L 60 -85"
                        />
                </circle>

                <circle id="dot-25" class="data-dot" cx="520" cy="480">
                    <animateMotion
                        id="anim-25"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -300 L 75 -300"
                        />
                </circle>

                <circle id="dot-9" class="data-dot" cx="205" cy="430">
                    <animateMotion
                        id="anim-9"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 25 0"
                        />
                </circle>

                <circle id="dot-16" class="data-dot" cx="230" cy="430">
                    <animateMotion
                        id="anim-16"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 40"
                        />
                </circle>

                <circle id="dot-20" class="data-dot" cx="230" cy="470">
                    <animateMotion
                        id="anim-20"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 95 L 140 95"
                        />
                </circle>

                <circle id="dot-22" class="data-dot" cx="370" cy="565">
                    <animateMotion
                        id="anim-22"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 50 0"
                        />
                </circle>

                <circle id="dot-10" class="data-dot" cx="230" cy="430">
                    <animateMotion
                        id="anim-10"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -15"
                        />
                </circle>
                
                <circle id="dot-12" class="data-dot" cx="230" cy="415">
                    <animateMotion
                        id="anim-12"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -35"
                        />
                </circle>

                <circle id="dot-14" class="data-dot" cx="230" cy="380">
                    <animateMotion
                        id="anim-14"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -100 L 110 -100"
                        />
                </circle>

                <circle id="dot-13" class="data-dot" cx="230" cy="380">
                    <animateMotion
                        id="anim-13"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 160 0"
                        />
                </circle>

                <circle id="dot-11" class="data-dot" cx="230" cy="415">
                    <animateMotion
                        id="anim-11"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 95 0"
                        />
                </circle>

                <circle id="dot-17" class="data-dot" cx="230" cy="470">
                    <animateMotion
                        id="anim-17"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 60 0"
                        />
                </circle>

                <circle id="dot-19" class="data-dot" cx="290" cy="470">
                    <animateMotion
                        id="anim-19"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 100 0"
                        />
                </circle>

                <circle id="dot-18" class="data-dot" cx="290" cy="470">
                    <animateMotion
                        id="anim-18"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -25 L 35 -25"
                        />
                </circle>

                <circle id="dot-21" class="data-dot" cx="355" cy="430">
                    <animateMotion
                        id="anim-21"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 35 0"
                        />
                </circle>

                <circle id="dot-23" class="data-dot" cx="370" cy="565">
                    <animateMotion
                        id="anim-23"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 50 L 165 50 L 165 15 L 185 15"
                        />
                </circle>

                <circle id="dot-27" class="data-dot" cx="490" cy="440">
                    <animateMotion
                        id="anim-27"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 15 0"
                        />
                </circle>

                <circle id="dot-28" class="data-dot" cx="505" cy="440">
                    <animateMotion
                        id="anim-28"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 40 0"
                        />
                </circle>

                <circle id="dot-26" class="data-dot" cx="520" cy="480">
                    <animateMotion
                        id="anim-26"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 25 0"
                        />
                </circle>

                <circle id="dot-30" class="data-dot" cx="490" cy="400">
                    <animateMotion
                        id="anim-30"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 120 0"
                        />
                </circle>

                <circle id="dot-37" class="data-dot" cx="575" cy="460">
                    <animateMotion
                        id="anim-37"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 35 0"
                        />
                </circle>

                <circle id="dot-29" class="data-dot" cx="505" cy="440">
                    <animateMotion
                        id="anim-29"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 85 L 255 85"
                        />
                </circle>

                <circle id="dot-32" class="data-dot" cx="670" cy="440">
                    <animateMotion
                        id="anim-32"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 70 0"
                        />
                </circle>

                <circle id="dot-33" class="data-dot" cx="740" cy="440">
                    <animateMotion
                        id="anim-33"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 20 0"
                        />
                </circle>

                <circle id="dot-34" class="data-dot" cx="740" cy="440">
                    <animateMotion
                        id="anim-34"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 130 L 140 130 L 140 60 L 155 60"
                        />
                </circle>

                <circle id="dot-36" class="data-dot" cx="925" cy="480">
                    <animateMotion
                        id="anim-36"
                        dur="3.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 15 0 L 15 150 L -575 150 L -575 5 L -535 5"
                        />
                </circle>

                <circle id="dot-35" class="data-dot" cx="860" cy="460">
                    <animateMotion
                        id="anim-35"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 35 0"
                        />
                </circle>

                <circle id="dot-31" class="data-dot" cx="640" cy="390">
                    <animateMotion
                        id="anim-31"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 0 -20"
                        />
                </circle>

                <circle id="dot-50" class="data-dot" cx="370" cy="350">
                    <animateMotion
                        id="anim-50"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 70 0 L 70 15"
                        />
                </circle>

                <circle id="dot-49" class="data-dot" cx="385" cy="340">
                    <animateMotion
                        id="anim-49"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 128 0 L 128 282 L 195 282 L 195 270"
                        />
                </circle>

                <circle id="dot-56" class="data-dot" cx="605" cy="580">
                    <animateMotion
                        id="anim-56"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 35 0 L 35 -110"
                        />
                </circle>

                <circle id="dot-48" class="data-dot" cx="393" cy="327">
                    <animateMotion
                        id="anim-48"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 167 0 L 167 93"
                        />
                </circle>

                <circle id="dot-47" class="data-dot" cx="395" cy="315">
                    <animateMotion
                        id="anim-47"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 245 0 L 245 35"
                        />
                </circle>

                <circle id="dot-46" class="data-dot" cx="400" cy="303">
                    <animateMotion
                        id="anim-46"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 405 0 L 405 117"
                        />
                </circle>

                <circle id="dot-45" class="data-dot" cx="400" cy="292">
                    <animateMotion
                        id="anim-45"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 510 0 L 510 148"
                        />
                </circle>

                <circle id="dot-44" class="data-dot" cx="400" cy="280">
                    <animateMotion
                        id="anim-44"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 570 0 L 570 320 L 410 320 L 410 260"
                        />
                </circle>

                <circle id="dot-43" class="data-dot" cx="400" cy="267">
                    <animateMotion
                        id="anim-43"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 350 0 L 350 78 L 365 78"
                        />
                </circle>

                <circle id="dot-51" class="data-dot" cx="670" cy="405">
                    <animateMotion
                        id="anim-51"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 80 0 L 80 -50 L 95 -50"
                        />
                </circle>

                <circle id="dot-52" class="data-dot" cx="780" cy="350">
                    <animateMotion
                        id="anim-52"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 10 0 L 10 -90 L 38 -90"
                        />
                </circle>

                <circle id="dot-42" class="data-dot" cx="397" cy="255">
                    <animateMotion
                        id="anim-42"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 293 0 L 293 90 L 308 90"
                        />
                </circle>

                <circle id="dot-55" class="data-dot" cx="680" cy="360">
                    <animateMotion
                        id="anim-55"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 25 0"
                        />
                </circle>

                <circle id="dot-54" class="data-dot" cx="720" cy="350">
                    <animateMotion
                        id="anim-54"
                        dur="1.0s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 10 0 L 10 -100 L 100 -100"
                        />
                </circle>

                <circle id="dot-41" class="data-dot" cx="395" cy="243">
                    <animateMotion
                        id="anim-41"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 425 0"
                        />
                </circle>

                <circle id="dot-53" class="data-dot" cx="845" cy="250">
                    <animateMotion
                        id="anim-53"
                        dur="0.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 25 0 L 25 -70"
                        />
                </circle>

                <circle id="dot-40" class="data-dot" cx="390" cy="230">
                    <animateMotion
                        id="anim-40"
                        dur="1.5s"
                        begin="indefinite"
                        fill="freeze"
                        path="M 0 0 L 10 0 L 10 -50 L -170 -50 L -170 270 L -50 270 L -50 233"
                        />
                </circle>


                <!--HIEU UNG CHAM SANG-->
                <radialGradient id="glow" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" stop-color="yellow" stop-opacity="0.8" />
                    <stop offset="100%" stop-color="yellow" stop-opacity="0" />
                </radialGradient>
  
                <circle id="lightCircle-pc"
                        cx="55" cy="380" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux1-turn0"
                        cx="340" cy="403" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux1-turn1"
                        cx="340" cy="443" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux2-turn0"
                        cx="560" cy="440" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux2-turn1"
                        cx="560" cy="480" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux3-turn1"
                        cx="910" cy="460" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux3-turn0"
                        cx="910" cy="500" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux4-turn0"
                        cx="870" cy="120" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-mux4-turn1"
                        cx="870" cy="160" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-flags-N"
                        cx="610" cy="360" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-flags-Z"
                        cx="630" cy="360" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-flags-C"
                        cx="650" cy="360" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-flags-V"
                        cx="670" cy="360" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <!-- <circle id="lightCircle-alu-top"
                cx="625" cy="400" r="15"
                fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-alu-bottom"
                        cx="625" cy="460" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                /> -->
                <!-- <circle id="lightCircle-addbranch-top"
                        cx="685" cy="140" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                /> -->
                <!-- <circle id="lightCircle-addbranch-bottom"
                        cx="685" cy="180" r="15"
                        fill="url(#glow)"
                        visibility="hidden"
                /> -->
                <!-- <circle id="lightCircle-alucontrol-top"
                        cx="580" cy="560" r="20"
                        fill="url(#glow)"
                        visibility="hidden"
                /> -->
                <!-- <circle id="lightCircle-and1-bottom"
                        cx="710" cy="360" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-and2-top"
                        cx="770" cy="340" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-and2-bottom"
                        cx="770" cy="360" r="5"
                        fill="url(#glow)"
                        visibility="hidden" -->
                />
                <!-- <circle id="lightCircle-orr-top"
                        cx="825" cy="240" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                /> -->
                <!-- <circle id="lightCircle-orr-mid"
                        cx="830" cy="250" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                />
                <circle id="lightCircle-orr-bottom"
                        cx="825" cy="260" r="5"
                        fill="url(#glow)"
                        visibility="hidden"
                /> -->

            </svg>
        </div> <!-- End svg-container -->
    </div> <!-- **** END: simulation-container **** -->

    <div id="data-display-container">
        <!-- Khu vực hiển thị thanh ghi -->
        <div id="register-view" class="data-panel">
            <h3>Registers</h3>
            <div id="register-table-container">
                <!-- Nội dung bảng thanh ghi sẽ được JS chèn vào đây -->
            </div>
        </div>

        <!-- Khu vực hiển thị bộ nhớ -->
        <div id="memory-view" class="data-panel">
            <h3>Data Memory</h3>
            <div id="memory-table-container">
                <!-- Nội dung bảng bộ nhớ sẽ được JS chèn vào đây -->
            </div>
        </div>
    </div>

    <!-- **** START: Thêm Footer Bản quyền **** -->
    <footer id="page-footer">
        <p>© <span id="copyright-year"></span> Bản quyền thuộc về Đỗ Trọng Huy, Đặng Thanh Long.</p>
    </footer>
    <!-- **** END: Thêm Footer Bản quyền **** -->

    <script type="module" src="script/main.js"></script>
    <script src="UI/zoom.js"></script>

     <!-- **** START: Script cập nhật năm tự động **** -->
     <script>
        document.addEventListener('DOMContentLoaded', () => {
            const yearSpan = document.getElementById('copyright-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }
        });
    </script>
    <!-- **** END: Script cập nhật năm tự động **** -->

</body>
</html>  
